<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box {
            width: 100px;
            height: 100px;
            background: #f00;
        }
    </style>
</head>

<body>
    <div class="box"></div>
    <button id="btn">play</button>
    <script>
        const BOX = document.querySelector('.box');
        const BTN = document.querySelector('#btn');

        const BOXANI = BOX.animate([
            { transform: 'translate(0, 0)' },
            { transform: 'translate(0, 500px)' },
            { transform: 'translate(500px, 500px)' },
            { transform: 'translate(500px, 0)' },
            { transform: 'translate(0, 0)' },
        ], {
            duration: 1000,
            fill: 'both'
        });


        BOXANI.pause();
        BTN.addEventListener('click', () => {
            BOXANI.play();
        })


    </script>
    <!-- https://fe-developers.kakaoent.com/2022/220630-four-ways-web-animation/ -->
    <!-- let isAnimating = false;
let isClose = false;

const animationApi = document.querySelector(".animation-api");
const firstStick = animationApi.querySelector(".stick:nth-child(1)");
const secondStick = animationApi.querySelector(".stick:nth-child(2)");
const thirdStick = animationApi.querySelector(".stick:nth-child(3)");
animationApi.addEventListener("click", handleClickAnimationApi);

function getRotateAnimation(deg, isReverse) {
  return [
    [
      { transform: "rotate(0)", width: "120px" },
      { transform: `rotate(${deg}deg)`, width: "136px" },
    ],
    getOptions(isReverse),
  ];
}
function getShrinkAnimation(isReverse) {
  return [{ transform: ["scale(1)", "scale(0.2)"] }, getOptions(isReverse)];
}
function getOptions(isReverse) {
  return {
    duration: 300,
    fill: "forwards",
    direction: isReverse ? "reverse" : undefined,
    easing: "ease",
  };
}

function handleClickAnimationApi() {
  if (isAnimating) return;
  firstStick.animate(...getRotateAnimation(45, isClose));
  secondStick.animate(...getShrinkAnimation(isClose));
  const player = thirdStick.animate(...getRotateAnimation(-45, isClose));
  player.ready.then(
    () => (isAnimating = true),
    () => (isAnimating = false)
  );
  player.finished.then(
    () => {
      isClose = !isClose;
      isAnimating = false;
    },
    () => (isAnimating = false)
  );
} -->
</body>

</html>